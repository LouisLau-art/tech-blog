---
title: "ä»é›¶å­¦ Nuxt å…¨æ ˆ(3)ï¼šNuxt æ¶æ„ - SSRã€è·¯ç”±ä¸ç›®å½•çº¦å®š"
pubDate: 'Dec 16 2025'
description: "æœ¬ç¯‡ä»‹ç» Nuxt åœ¨ Vue ä¹‹ä¸Šçš„å¢å¼ºï¼šSSR æœåŠ¡ç«¯æ¸²æŸ“ã€åŸºäºæ–‡ä»¶çš„è‡ªåŠ¨è·¯ç”±ã€Nuxt 4 çš„ç›®å½•ç»“æ„ï¼Œä»¥åŠ nuxt.config.ts é…ç½®è§£æã€‚"
---

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¼šäº† Vue 3 çš„æ ¸å¿ƒï¼šå“åº”å¼ã€ç»„ä»¶ã€é€šä¿¡ã€‚

ä½†å¦‚æœä½ ç›´æ¥ç”¨ Vue CLI æˆ– Vite åˆ›å»ºä¸€ä¸ª Vue é¡¹ç›®ï¼Œä½ éœ€è¦è‡ªå·±å¤„ç†å¾ˆå¤šäº‹æƒ…ï¼š
-   è·¯ç”±é…ç½® (vue-router)
-   æœåŠ¡ç«¯æ¸²æŸ“ (å¦‚æœéœ€è¦)
-   æ„å»ºä¼˜åŒ–
-   API ä»£ç†

**Nuxt** å°±æ˜¯æ¥è§£å†³è¿™äº›é—®é¢˜çš„ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäº Vue çš„**å…¨æ ˆæ¡†æ¶**ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ï¼š
-   ğŸ“ **åŸºäºæ–‡ä»¶çš„è·¯ç”±**
-   ğŸ–¥ï¸ **æœåŠ¡ç«¯æ¸²æŸ“ (SSR)**
-   ğŸ”Œ **å†…ç½®åç«¯ API (Nitro)**
-   ğŸ“¦ **è‡ªåŠ¨å¯¼å…¥**

## æ¸²æŸ“æ¨¡å¼ï¼šSSR vs CSR vs SSG

åœ¨æ·±å…¥ Nuxt ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸‰ç§æ¸²æŸ“æ¨¡å¼ã€‚

### CSRï¼šå®¢æˆ·ç«¯æ¸²æŸ“

ä¼ ç»Ÿçš„ Vue SPA (å•é¡µåº”ç”¨) ä½¿ç”¨ CSRï¼š
1.  æœåŠ¡å™¨è¿”å›ä¸€ä¸ªå‡ ä¹ç©ºçš„ HTMLï¼ˆåªæœ‰ `<div id="app">`ï¼‰ã€‚
2.  æµè§ˆå™¨ä¸‹è½½ JavaScriptã€‚
3.  JavaScript åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œç”Ÿæˆ HTML å†…å®¹ã€‚

**ä¼˜ç‚¹**ï¼šäº¤äº’æµç•…ï¼Œé¡µé¢åˆ‡æ¢ä¸åˆ·æ–°ã€‚
**ç¼ºç‚¹**ï¼šé¦–å±åŠ è½½æ…¢ï¼Œä¸åˆ©äº SEOï¼ˆæœç´¢å¼•æ“çœ‹åˆ°çš„æ˜¯ç©ºç™½é¡µï¼‰ã€‚

### SSRï¼šæœåŠ¡ç«¯æ¸²æŸ“

Spring Boot + Thymeleaf å°±æ˜¯ SSRï¼š
1.  æœåŠ¡å™¨æ‰§è¡Œæ¨¡æ¿å¼•æ“ï¼Œç”Ÿæˆå®Œæ•´ HTMLã€‚
2.  æµè§ˆå™¨ç›´æ¥æ˜¾ç¤º HTMLã€‚
3.  JavaScript åŠ è½½åï¼Œé¡µé¢å˜å¾—"å¯äº¤äº’"ã€‚

**Nuxt çš„ SSR** ç»“åˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ï¼š
-   é¦–æ¬¡è¯·æ±‚ï¼šæœåŠ¡å™¨è¿”å›å®Œæ•´ HTMLï¼ˆæœ‰åˆ©äº SEO å’Œé¦–å±é€Ÿåº¦ï¼‰ã€‚
-   åç»­å¯¼èˆªï¼šå®¢æˆ·ç«¯æ¥ç®¡ï¼Œåƒ SPA ä¸€æ ·æµç•…ã€‚

### SSGï¼šé™æ€ç«™ç‚¹ç”Ÿæˆ

åœ¨æ„å»ºæ—¶å°±æŠŠæ‰€æœ‰é¡µé¢ç”Ÿæˆä¸ºé™æ€ HTML æ–‡ä»¶ï¼Œé€‚åˆåšå®¢ã€æ–‡æ¡£ç­‰å†…å®¹ä¸å¸¸å˜çš„ç½‘ç«™ã€‚

| æ¨¡å¼ | é¦–å±é€Ÿåº¦ | SEO | åŠ¨æ€æ•°æ® | é€‚ç”¨åœºæ™¯ |
|------|----------|-----|----------|----------|
| CSR | æ…¢ | å·® | å®æ—¶ | åå°ç®¡ç†ç³»ç»Ÿ |
| SSR | å¿« | å¥½ | å®æ—¶ | ç”µå•†ã€ç¤¾äº¤ |
| SSG | æœ€å¿« | å¥½ | æ„å»ºæ—¶ | åšå®¢ã€æ–‡æ¡£ |

Atidraw ä½¿ç”¨ **SSR** æ¨¡å¼ï¼Œå› ä¸ºç”»ä½œåˆ—è¡¨éœ€è¦å®æ—¶ä» R2 è·å–ã€‚

## åŸºäºæ–‡ä»¶çš„è·¯ç”±

åœ¨ä¼ ç»Ÿ Vue é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦æ‰‹åŠ¨é…ç½®è·¯ç”±ï¼š

```javascript
// router/index.js (vue-router)
const routes = [
  { path: '/', component: Home },
  { path: '/about', component: About },
  { path: '/user/:id', component: User },
]
```

åœ¨ Nuxt ä¸­ï¼Œ**è·¯ç”±ç”±æ–‡ä»¶ç»“æ„è‡ªåŠ¨ç”Ÿæˆ**ã€‚

### ç±»æ¯” Spring

è¿™å’Œ Spring çš„ `@RequestMapping` ç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯åŸºäºæ–‡ä»¶åï¼š

| Nuxt æ–‡ä»¶è·¯å¾„ | å¯¹åº” URL | Spring ç±»æ¯” |
|---------------|----------|-------------|
| `pages/index.vue` | `/` | `@GetMapping("/")` |
| `pages/about.vue` | `/about` | `@GetMapping("/about")` |
| `pages/user/[id].vue` | `/user/123` | `@GetMapping("/user/{id}")` |

### Atidraw çš„è·¯ç”±

```
app/pages/
â”œâ”€â”€ index.vue    â†’  /        (é¦–é¡µç”»å»Š)
â””â”€â”€ draw.vue     â†’  /draw    (ç”»æ¿é¡µé¢)
```

åªéœ€è¦åˆ›å»ºæ–‡ä»¶ï¼Œè·¯ç”±è‡ªåŠ¨ç”Ÿæ•ˆï¼

### åŠ¨æ€è·¯ç”±å‚æ•°

å¦‚æœä½ éœ€è¦åŠ¨æ€ URLï¼ˆå¦‚ `/user/123`ï¼‰ï¼Œä½¿ç”¨æ–¹æ‹¬å·å‘½åï¼š

```
pages/
â””â”€â”€ user/
    â””â”€â”€ [id].vue   â†’  /user/:id
```

åœ¨ç»„ä»¶ä¸­è·å–å‚æ•°ï¼š

```vue
<script setup>
const route = useRoute()
console.log(route.params.id)  // '123'
</script>
```

## Nuxt 4 ç›®å½•ç»“æ„

Nuxt 4 å¼•å…¥äº†æ–°çš„ç›®å½•ç»“æ„ï¼ŒæŠŠ**å‰ç«¯**å’Œ**åç«¯**ä»£ç åˆ†å¼€ï¼š

```
atidraw/
â”œâ”€â”€ app/                  # ğŸ¨ å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ components/       # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ pages/            # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ plugins/          # Vue æ’ä»¶
â”‚   â”œâ”€â”€ assets/           # é™æ€èµ„æº (CSS, å›¾ç‰‡)
â”‚   â””â”€â”€ app.vue           # æ ¹ç»„ä»¶
â”œâ”€â”€ server/               # âš™ï¸  ç«¯ä»£ç  (Nitro)
â”‚   â”œâ”€â”€ api/              # REST API
â”‚   â””â”€â”€ routes/           # å…¶ä»–æœåŠ¡ç«¯è·¯ç”±
â”œâ”€â”€ nuxt.config.ts        # ğŸ“ é¡¹ç›®é…ç½®
â””â”€â”€ package.json
```

### `app/` vs `server/`

| ç›®å½• | è¿è¡Œç¯å¢ƒ | ç±»æ¯” |
|------|----------|------|
| `app/` | æµè§ˆå™¨ + æœåŠ¡ç«¯ (SSR æ—¶) | Vue å‰ç«¯ |
| `server/` | ä»…æœåŠ¡ç«¯ (Node.js/Workers) | Spring Controller |

### `app.vue`ï¼šæ ¹ç»„ä»¶

`app/app.vue` æ˜¯æ•´ä¸ªåº”ç”¨çš„å…¥å£ï¼Œç±»ä¼¼ `index.html` çš„ `<body>`ï¼š

```vue
<template>
  <UApp>
    <AppHeader />
    <UContainer>
      <main>
        <NuxtPage />  <!-- è¿™é‡Œæ¸²æŸ“å½“å‰è·¯ç”±å¯¹åº”çš„é¡µé¢ -->
      </main>
    </UContainer>
    <AppFooter />
  </UApp>
</template>
```

`<NuxtPage />` æ˜¯ä¸€ä¸ªç‰¹æ®Šç»„ä»¶ï¼ŒNuxt ä¼šæ ¹æ®å½“å‰ URL è‡ªåŠ¨æ›¿æ¢ä¸ºå¯¹åº”çš„é¡µé¢ç»„ä»¶ã€‚

## `nuxt.config.ts`ï¼šé¡¹ç›®é…ç½®

è¿™ä¸ªæ–‡ä»¶ç±»ä¼¼ Spring çš„ `application.yml`ï¼Œç”¨äºé…ç½® Nuxt çš„å„ç§è¡Œä¸ºã€‚

çœ‹çœ‹ Atidraw çš„é…ç½®ï¼š

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  // 1. å¯ç”¨çš„æ¨¡å— (ç±»ä¼¼ starter ä¾èµ–)
  modules: [
    '@nuxthub/core',    // Cloudflare é›†æˆ
    '@nuxt/ui',         // UI ç»„ä»¶åº“
    '@nuxt/eslint',     // ä»£ç æ£€æŸ¥
    'nuxt-auth-utils',  // èº«ä»½è®¤è¯
  ],
  
  // 2. å¯ç”¨å¼€å‘å·¥å…·
  devtools: { enabled: true },
  
  // 3. å…¨å±€ CSS
  css: ['~/assets/main.css'],
  
  // 4. è·¯ç”±è§„åˆ™
  routeRules: {
    '/drawings/**': { isr: true },  // å¢é‡é™æ€å†ç”Ÿ
  },
  
  // 5. å¯ç”¨ Nuxt 4 å…¼å®¹æ¨¡å¼
  future: { compatibilityVersion: 4 },
  compatibilityDate: '2025-10-14',
  
  // 6. NuxtHub é…ç½®ï¼šå¯ç”¨ Blob å­˜å‚¨
  hub: {
    blob: true,
  },
})
```

### å…³é”®é…ç½®è§£è¯»

| é…ç½® | è¯´æ˜ |
|------|------|
| `modules` | æ‰©å±• Nuxt åŠŸèƒ½çš„æ’ä»¶ï¼Œç±»ä¼¼ Spring çš„ starter |
| `css` | å…¨å±€ CSS æ–‡ä»¶ï¼Œ`~` è¡¨ç¤ºé¡¹ç›®æ ¹ç›®å½• |
| `routeRules` | æŒ‰è·¯ç”±å®šåˆ¶æ¸²æŸ“ç­–ç•¥ |
| `hub.blob` | å¯ç”¨ NuxtHub çš„å¯¹è±¡å­˜å‚¨ (Cloudflare R2) |

## è‡ªåŠ¨å¯¼å…¥

Nuxt çš„å¦ä¸€ä¸ªç¥å¥‡ç‰¹æ€§ï¼š**ä½ ä¸éœ€è¦æ‰‹åŠ¨ import å¸¸ç”¨å‡½æ•°**ã€‚

åœ¨ Vue é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦è¿™æ ·å†™ï¼š

```vue
<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'

const count = ref(0)
</script>
```

åœ¨ Nuxt ä¸­ï¼Œç›´æ¥ç”¨ï¼š

```vue
<script setup>
// ä¸éœ€è¦ importï¼Nuxt è‡ªåŠ¨å¯¼å…¥
const count = ref(0)
const route = useRoute()
</script>
```

ä»¥ä¸‹å‡½æ•°/ç»„ä»¶ä¼šè¢«è‡ªåŠ¨å¯¼å…¥ï¼š
-   Vue çš„ `ref`, `reactive`, `computed`, `watch`, `onMounted` ç­‰
-   Nuxt çš„ `useFetch`, `useRoute`, `navigateTo` ç­‰
-   `components/` ç›®å½•ä¸‹çš„æ‰€æœ‰ç»„ä»¶

## å°ç»“

| æ¦‚å¿µ | Nuxt | Spring ç±»æ¯” |
|------|------|-------------|
| è·¯ç”± | åŸºäºæ–‡ä»¶ (`pages/`) | `@RequestMapping` |
| æ ¹ç»„ä»¶ | `app.vue` | `index.html` |
| é…ç½®æ–‡ä»¶ | `nuxt.config.ts` | `application.yml` |
| åç«¯ç›®å½• | `server/` | `@RestController` |
| è‡ªåŠ¨å¯¼å…¥ | å†…ç½®æ”¯æŒ | - |

ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ·±å…¥ `server/` ç›®å½•ï¼Œå­¦ä¹ å¦‚ä½•ç”¨ TypeScript å†™åç«¯ APIã€‚ä½ ä¼šå‘ç°ï¼ŒNuxt çš„ Server API å†™èµ·æ¥æ¯” Spring Controller è¿˜è¦ç®€æ´ï¼
